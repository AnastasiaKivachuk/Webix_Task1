<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lesson 1</title>
    <script type="text/javascript" src="http://cdn.webix.com/edge/webix.js"></script>

    <link rel="stylesheet" type="text/css" href="http://cdn.webix.com/edge/webix.css">
    <script type="text/javascript" src="testdata.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <script type="text/javascript" charset="utf-8">
        var toolbar = {
            view: "toolbar",
            css: "webix_dark toolbarPadding",
            cols: [{
                view: "label",
                label: "My App",
                align: "left",

            },
            {
                view: "button",
                autowidth: true,
                label: "Profile",
                type: "icon",
                icon: "wxi-user",
                css: "webix_transparent",
                borderless: true,
                click: function () {
                    $$("mywindow").show();
                }
            }]
        };

        var row2 = {
            cols: [{
                rows: [
                    {
                        view: "list",
                        id: "mylist",
                        scroll: false,
                        width: 200,
                        // type: clean,
                        css: "sideGray",
                        data: ["Dashboard", "Users", "Products", "Locations"]
                    },
                    {
                        view: "button",
                        label: "Connected",
                        css: "greenbutton",
                        borderless: true,
                        css: 'greenbutton',
                        type: "icon",
                        icon: "wxi-check",
                    }
                ]
            },
            { view: "resizer" },
            {
                rows: [
                    {
                        view: "datatable",
                        id: "mydata",
                        data: small_film_set,
                        autoConfig: true,
                        scrollX: false,

                    },

                ]
            },
            {
                view: "form",
                id: "myform",
                width: 400,
                elements: [{
                    template: "EDIT FILMS",
                    type: "section"
                },
                {
                    view: "text",
                    label: "Title",
                    name: "Title",
                    invalidMessage: "Please enter title"
                },
                {
                    view: "text",
                    label: "Year",
                    name: "Year",
                    invalidMessage: "Please enter year between 1970 and 2019"
                },
                {
                    view: "text",
                    label: "Rating",
                    name: "Rating",
                    invalidMessage: "Please enter rating (it can't be 0)"
                },
                {
                    view: "text",
                    label: "Votes",
                    name: "Votes",
                    invalidMessage: "Please enter votes less than 100000"
                },
                {
                    cols: [
                        {
                            view: "button",
                            value: "Add new",
                            css: "webix_primary",
                            click: function () {
                                if ($$("myform").validate()) {
                                    webix.message("validation is successful");
                                    var item = $$("myform").getValues();
                                    console.log(item);
                                    $$("mydata").add(item);
                                }

                            }


                        },
                        {
                            view: "button",
                            value: "Clear",
                            click: function () {
                                webix.confirm({
                                    text: "Do you still want to continue?"
                                }).then(
                                    function () {
                                        var titleInput = $$("myform").elements.Title;
                                        titleInput.setValue("");
                                        var YearInput = $$("myform").elements.Year;
                                        YearInput.setValue("");
                                        var RatingInput = $$("myform").elements.Rating;
                                        RatingInput.setValue("");
                                        var VotesInput = $$("myform").elements.Votes;
                                        VotesInput.setValue("");
                                    },
                                    
                                );
                            }

                        }
                    ],

                },
                {}
                ],
                rules: {
                    Title: webix.rules.isNotEmpty,
                    Year: function (value) {
                        return value >= 1970 && value <= 2019;
                    },
                    Rating: function (value) {
                        return value != '' || value != 0 && value < 100000;
                    },
                    Votes: function (value) {
                        return value != '' || value != 0;
                    },
                },

            }

            ]
        };
        webix.ready(function () {
            webix.ui({
                id: "app",
                rows: [toolbar, row2,
                    {
                        view: "template",
                        css: "row3",
                        autoheight: true,
                        template: "The software is provided by <a href=#>https://webix.com</a>. All rights reserved (c)",
                        align: "center"
                    }]
            });
        })

    </script>
</body>

</html>